---
name: cf-mysql
version: 19
installer_version: 1.0.0
stemcell:
  name:    bosh-vsphere-esxi-ubuntu
  file:    bosh-stemcell-1116-vsphere-esxi-ubuntu.tgz
  version: '1116'
  md5:     11b51900d9fcf92b36e249c475014ec3
releases:
  - name:    cf-mysql
    file:    cf-mysql-0.65-dev.tgz
    version: 0.65-dev
    md5:     252ef535a42bbf06a450641c52a82e18
label: Pivotal MySQL Dev
description: MySQL relational database service for application development and testing.
image: iVBORw0KGgoAAAANSUhEUgAAALQAAAAoCAYAAAEgbuCcAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4MDM1ZGQ0MC0wNWRkLTRlZmQtYWQ4Ny1hYmRlMGE5Y2Y2Y2UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEM2MkQ2NEYzNDRDMTFFMzk2ODdDODQ3MTU0RThBMTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEM2MkQ2NEUzNDRDMTFFMzk2ODdDODQ3MTU0RThBMTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YjhjZjMyZGYtM2MzYi00Y2YwLTgzZWEtYzliMmRmMmEyMjA3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgwMzVkZDQwLTA1ZGQtNGVmZC1hZDg3LWFiZGUwYTljZjZjZSIvPiA8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
rank: 1

job_types:
  # mysql server must come before the broker, or broker will fail to start as it can't find the database server
  - name: mysql
    label: MySQL Server
    resource_label: MySQL Server
    description: MySQL Server
    template: mysql

    resource_definitions:
      - name: ram
        type: integer
        label: RAM
        configurable: true
        default: 8192

      - name: ephemeral_disk
        type: integer
        label: Ephemeral Disk
        configurable: true
        default: 30000

      - name: persistent_disk
        type: integer
        label: Persistent Disk
        configurable: true
        default: 100000

      - name: cpu
        type: integer
        label: CPU
        configurable: true
        default: 2

    static_ip: 1
    dynamic_ip: 0

    instance_definitions:
      - name: instances
        type: integer
        label: Instances
        configurable: false
        default: 1

    property_definitions:
      - name: vm_credentials
        type: salted_credentials
        label: VM credentials
        default:
          identity: vcap

      - name: mysql_admin_password
        type: simple_credentials
        label: MySQL root password

    manifest: |
      admin_password: (( mysql_admin_password.password ))
      max_connections: 1500
      max_user_connections: 40
      innodb_buffer_pool_size: 2147483648

  - name: cf-mysql-broker
    label: MySQL Broker
    resource_label: MySQL Broker
    description: Implements the v2 CF Service Broker API. Provides a catalog of services and plans that cloud controller fetches, and acts on the MySQL node based on provisioning calls received from cloud controller.
    template: cf-mysql-broker

    resource_definitions:
      - name: ram
        type: integer
        label: RAM
        configurable: true
        default: 1024

      - name: ephemeral_disk
        type: integer
        label: Ephemeral Disk
        configurable: true
        default: 10000

      - name: persistent_disk
        type: integer
        label: Persistent Disk
        configurable: false
        default: 0

      - name: cpu
        type: integer
        label: CPU
        configurable: true
        default: 1

    static_ip: 1
    dynamic_ip: 0

    instance_definitions:
      - name: instances
        type: integer
        label: Instances
        configurable: false
        default: 1

    property_definitions:
      - name: vm_credentials
        type: salted_credentials
        label: VM credentials
        default:
          identity: vcap

      - name: broker_auth_password
        type: simple_credentials
        label: Basic Auth Password

    manifest: |
      auth_password: (( broker_auth_password.password ))
      mysql_node:
        host: (( .mysql.first_ip ))
        admin_password: (( .mysql.mysql_admin_password.password ))
      services:
      - id: cf-mysql-1
        name: cf-mysql
        description: MySQL relational database service for application development and testing.
        bindable: true
        max_db_per_node: 500
        plans:
        - id: cf-mysql-plan-1
          name: 100mb
          description: Shared MySQL Server, 100mb persistent disk, 40 max concurrent connections per user
          max_storage_mb: 100

  - name: compilation
    label: Compilation
    resource_label: Compilation
    description: compilation-description

    resource_definitions:
      - name: ram
        type: integer
        label: RAM
        configurable: true
        default: 1_024

      - name: ephemeral_disk
        type: integer
        label: Ephemeral Disk
        configurable: true
        default: 8_192

      - name: persistent_disk
        type: integer
        label: Persistent Disk
        configurable: false
        default: 0

      - name: cpu
        type: integer
        label: CPU
        configurable: true
        default: 1

    static_ip: 1
    dynamic_ip: 0

    instance_definitions:
      - name: instances
        type: integer
        label: Instances
        default: 1
